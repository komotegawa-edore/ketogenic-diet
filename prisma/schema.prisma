generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model Food {
  id        String     @id @default(cuid())
  name      String
  protein   Float      // g per 100g
  fat       Float      // g per 100g
  carbs     Float      // g per 100g
  calories  Float      // kcal per 100g
  createdAt DateTime   @default(now())
  meals     MealFood[]
}

model Meal {
  id        String     @id @default(cuid())
  date      DateTime
  type      String     // breakfast, lunch, dinner, snack
  foods     MealFood[]
  createdAt DateTime   @default(now())
}

model MealFood {
  id     String @id @default(cuid())
  meal   Meal   @relation(fields: [mealId], references: [id], onDelete: Cascade)
  mealId String
  food   Food   @relation(fields: [foodId], references: [id], onDelete: Cascade)
  foodId String
  amount Float  // grams
}

model DailyGoal {
  id       String  @id @default(cuid())
  protein  Float   // g
  fat      Float   // g
  carbs    Float   // g
  calories Float   // kcal
  isActive Boolean @default(true)
}
